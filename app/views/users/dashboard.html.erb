<h1>Welcome, <%= current_user.email %>!</h1>

<!-- ğŸ”¹ Complaint Stats Overview -->
<div style="display: flex; gap: 20px; margin: 20px 0;">
  <div style="flex: 1; padding: 10px; background: #f5f5f5; border: 1px solid #ccc; border-radius: 8px;">
    <h3>Sent</h3>
    <p><%= current_user.sent_complaints.count %> complaints</p>
  </div>
  <div style="flex: 1; padding: 10px; background: #f5f5f5; border: 1px solid #ccc; border-radius: 8px;">
    <h3>Received</h3>
    <p><%= current_user.received_complaints.count %> complaints</p>
  </div>
  <div style="flex: 1; padding: 10px; background: #f5f5f5; border: 1px solid #ccc; border-radius: 8px;">
    <h3>Forwarded to You</h3>
    <p><%= current_user.forwarded_complaints.count %> complaints</p>
  </div>
</div>

<!-- ğŸ”¹ Action Buttons -->
<div style="margin: 20px 0;">
  <%= link_to 'Create New Complaint', new_complaint_path, class: 'btn', style: 'padding: 10px 20px; background: #007bff; color: white; border-radius: 5px; text-decoration: none;' %>
</div>

<% sent = []
   received = []
   forwarded = []

   @complaints.each do |complaint|
     user_roles = complaint.user_complaints.select { |uc| uc.user_id == current_user.id }.map(&:role)

     sent << complaint if user_roles.include?("complainer")
     received << complaint if user_roles.include?("against")
     forwarded << complaint if user_roles.include?("forwarded_to")
   end
%>

<!-- ğŸ”¹ Complaints Sections -->
<div style="margin-top: 40px;">
  <h2>ğŸ“¤ Complaints You Made</h2>
  <%= render partial: 'complaint_list', locals: { complaints: sent, current_user: current_user } %>

  <h2>âš ï¸ Complaints Against You</h2>
  <%= render partial: 'complainer_hidden', locals: { complaints: received, current_user: current_user } %>

  <h2>ğŸ“¬ Complaints Forwarded To You</h2>
  <%= render partial: 'forwarded_resolve', locals: { complaints: forwarded, current_user: current_user } %>
</div>
